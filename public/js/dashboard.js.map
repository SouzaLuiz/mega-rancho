{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./dashboard.js"],"names":["totalPages","document","ReactDOM","Products","fetch","method","response","productsFiltered","item","setTimeout","setLoading","setProducts","alert","React","setMore","setCurrentPage","currentPage","product","_id","location","deleteProduct"],"mappings":"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","file":"dashboard.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./dashboard.js\");\n","const totalPages = Number(document.querySelector('input[name=total_pages]').value)\n\nfunction fadeOut(element){\n  element.style.opacity = 1;\n\n  (function fade() {\n    if ((element.style.opacity -= .1) < 0) {\n      element.style.display = \"none\";\n    } else {\n      requestAnimationFrame(fade);\n    }\n  })()\n}\n\nfunction fadeIn(element, display){\n  element.style.opacity = 0;\n  element.style.display = display || \"block\";\n\n  (function fade() {\n    let val = parseFloat(element.style.opacity);\n    if (!((val += .1) > 1)) {\n      element.style.opacity = val;\n      requestAnimationFrame(fade);\n    }\n  })()\n}\n\nconst Products = () => {\n  const [currentPage, setCurrentPage] = React.useState(1)\n  const [products, setProducts] = React.useState([])\n  const [more, setMore] = React.useState(false)\n  const [loading, setLoading] = React.useState(false)\n\n  React.useEffect(() => {\n    fetch(`/products?page=${currentPage}`)\n      .then(response => {\n        response.json().then(data => {\n          setProducts(data)\n          if(totalPages > 1) {\n            setMore(true)\n            setCurrentPage(currentPage + 1)\n          }\n        })\n      })\n  }, [])\n\n  function getMoreProducts() {    \n    fetch(`/products?page=${currentPage}`)\n      .then(response => {\n        response.json().then(data => {\n          if(currentPage <= totalPages) {\n            if(currentPage === totalPages) {\n              setMore(false)\n            } else {\n              setCurrentPage(currentPage + 1)\n            }\n          }\n          setProducts([...products, ...data])\n        })\n      })\n  }\n\n  function deleteProduct(id) {\n    fetch(`/products/${id}`, { method: 'DELETE' })\n      .then((response) => {\n        if(response.status === 200) {\n          const productsFiltered = products.filter(item => {\n            if (item._id !== id) {\n              return item\n            }\n          })\n          setTimeout(() => {\n            setLoading(false)\n            setProducts(productsFiltered)\n          }, 200)\n        } else {\n          alert('Falha ao excluir produto.')\n        }\n      })\n    setLoading(true) \n  }\n\n  return (\n    <>\n      {\n        products.map(product => (\n          <div className=\"product__content\">\n            <input type=\"hidden\" name=\"product-id\" value={product._id}/>\n            \n            <div className=\"product__image\">\n              <img src={`/uploads/${product.image}`} />\n            </div>\n\n            <div className=\"product__information\">\n              <span className=\"name\">{product.name}</span>\n              <span className=\"price\">R$ {(product.price).toFixed(2)}</span>\n\n              <div className=\"information__actions\">\n                <button \n                  className=\"actions__edit\" \n                  onClick={() => {location.href = `/edit-product/${product._id}`}}\n                >Editar</button>\n                <button \n                  className=\"actions__delete\"\n                  onClick={() => deleteProduct(product._id)}\n                >Excluir</button>\n              </div>\n            </div>\n          </div>\n        ))\n      }\n      {(more)? (\n        <div className=\"more-products\">\n          <button \n            className=\"button__black\" \n            onClick={getMoreProducts}\n          >Mais produtos</button>\n        </div>\n      ): null} \n\n      {(loading) ? (\n        <div className=\"loading\">\n          <div className=\"loader\"></div>\n        </div>\n      ): null}     \n    </>\n  )\n}\n\nReactDOM.render(<Products/>, document.querySelector('#list-products'))"],"sourceRoot":""}